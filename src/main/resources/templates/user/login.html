<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>main</title>
</head>
<body>
	<div>
		<h1>login form</h1>
<!-- 		<form id="loginForm" th:action="@{/user/login}" method="post" th:object="${joltzUser}">
			<div> -->
    <h1>login form</h1>
    <div>
        <label for="email"> Email: </label>
        <input type="email" id="email">
    </div>      
    <div>
        <label for="pwd"> Password: </label>
        <input type="password" id="pwd">
    </div>  
    <div>
        <button type="button" onclick="login()">Login</button>
    </div>  
<!-- </div>
		</form> -->
		<div id="message" style="color: red;"></div>
		
		
		<div class="button">
			<button th:onclick="|location.href='@{/user/register}'|">join</button>
		</div>
	</div>
</body>

<script th:src="@{https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js}"></script>
<script th:src="@{https://unpkg.com/axios/dist/axios.min.js}"></script>
<script type="text/javascript">
function login() {
    var email = $("#email").val();
    var pwd = $("#pwd").val();
    $.ajax({
        type: "POST",
        url: "/user/login",
        contentType: "application/json; charset=utf-8;",
        data: JSON.stringify({ email: email, pwd: pwd }),
        success: function(response) {
            $("#message").text('ㅎㅇ');
           	alert(email);
            window.location.href = "/";
        },
        error: function(xhr) {
            $("#message").text(xhr.responseText);
        }
    });
}
/* $(document).ready(function() {
    $("#loginForm").submit(function(event) {
        event.preventDefault();
        var email = $("#email").val();
        var pwd = $("#pwd").val();
        $.ajax({
            type: "POST",
            url: "/user/login",
            contentType: "application/json; charset=utf-8;",
            data: JSON.stringify({ email: email, pwd: pwd }),
            success: function(response) {
                $("#message").text(response);
                window.location.href = "/";
            },
            error: function(xhr) {
                $("#message").text(xhr.responseText);
            }
        });
    });
}); */
</script>
</html>